import{_ as a}from"./plugin-vue_export-helper.21dcd24c.js";import{r as e,o as t,c as i,a as n,b as l,e as c,d as o}from"./app.a5bdbb25.js";const p={},r=c(`<h1 id="ngixn-\u914D\u7F6E\u6587\u4EF6\u8BE6\u89E3" tabindex="-1"><a class="header-anchor" href="#ngixn-\u914D\u7F6E\u6587\u4EF6\u8BE6\u89E3" aria-hidden="true">#</a> Ngixn \u914D\u7F6E\u6587\u4EF6\u8BE6\u89E3</h1><p>\u672C\u6587\u57FA\u4E8E Nginx 1.18.0\uFF0C\u4ECB\u7ECD\u5176\u914D\u7F6E\u6587\u4EF6 <code>nginx.conf</code> \u7684\u4E3B\u8981\u914D\u7F6E\u53C2\u6570\u3002</p><h2 id="\u6838\u5FC3\u53C2\u6570\u8BE6\u89E3" tabindex="-1"><a class="header-anchor" href="#\u6838\u5FC3\u53C2\u6570\u8BE6\u89E3" aria-hidden="true">#</a> \u6838\u5FC3\u53C2\u6570\u8BE6\u89E3</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>user  nginx nginx<span class="token punctuation">;</span>                 <span class="token comment"># \u6307\u5B9A Nginx \u670D\u52A1\u8FD0\u884C\u7684\u7528\u6237\u548C\u7528\u6237\u7EC4</span>
worker_processes  <span class="token number">1</span><span class="token punctuation">;</span>               <span class="token comment"># \u5B9A\u4E49 Nginx \u7684 worker \u8FDB\u7A0B\u6570\uFF0C\u5EFA\u8BAE\u7B49\u4E8E CPU \u603B\u6838\u5FC3\u6570</span>

<span class="token comment"># \u5168\u5C40\u6307\u5B9A Nginx \u9519\u8BEF\u65E5\u5FD7\uFF0C\u5B9A\u4E49\u7C7B\u578B\uFF0C[ debug | info | notice | warn | error | crit ]</span>
<span class="token comment"># \u5982\u679C\u8981\u5173\u95ED error log\uFF0C\u9700\u8981\u5199\u6210 error_log /dev/null;</span>
<span class="token comment"># \u800C\u4E0D\u662F error_log off; \u5426\u5219\u9519\u8BEF\u65E5\u5FD7\u4F1A\u5199\u5230\u4E00\u4E2A\u53EB\u505A off \u7684\u6587\u4EF6\u4E2D</span>
error_log  /var/log/nginx/error.log warn<span class="token punctuation">;</span>

pid        /var/run/nginx.pid<span class="token punctuation">;</span>     <span class="token comment"># \u6307\u5B9A Nginx PID \u8FDB\u7A0B\u53F7\u6587\u4EF6</span>

<span class="token comment"># \u4E00\u4E2A Nginx \u8FDB\u7A0B\u6253\u5F00\u7684\u6700\u591A\u6587\u4EF6\u63CF\u8FF0\u7B26\u6570\u76EE</span>
<span class="token comment"># \u7406\u8BBA\u503C\u5E94\u8BE5\u662F\u6700\u591A\u6253\u5F00\u6587\u4EF6\u6570\uFF08\u7CFB\u7EDF\u7684\u503C ulimit -n\uFF09\u4E0E Nginx \u8FDB\u7A0B\u6570\u76F8\u9664</span>
<span class="token comment"># \u4F46\u662F Nginx \u5206\u914D\u8BF7\u6C42\u5E76\u4E0D\u5747\u5300\uFF0C\u6240\u4EE5\u5EFA\u8BAE\u4E0E ulimit -n \u7684\u503C\u4FDD\u6301\u4E00\u81F4</span>
worker_rlimit_nofile <span class="token number">65535</span><span class="token punctuation">;</span>

<span class="token comment"># \u5DE5\u4F5C\u6A21\u5F0F\u4E0E\u8FDE\u63A5\u6570\u4E0A\u9650</span>
events <span class="token punctuation">{</span>
    <span class="token comment"># \u53C2\u8003\u4E8B\u4EF6\u6A21\u578B</span>
    <span class="token comment"># use [ kqueue | rtsig | epoll | /dev/poll | select | poll ]</span>
    <span class="token comment"># epoll \u6A21\u578B\u662F Linux 2.6 \u4EE5\u4E0A\u7248\u672C\u5185\u6838\u4E2D\u7684\u9AD8\u6027\u80FD\u7F51\u7EDC I/O \u6A21\u578B</span>
    <span class="token comment"># \u5982\u679C\u8DD1\u5728 FreeBSD \u4E0A\u9762\uFF0C\u5C31\u7528 kqueue \u6A21\u578B</span>
    use epoll<span class="token punctuation">;</span>
    <span class="token comment"># \u5355\u4E2A\u8FDB\u7A0B\u6700\u5927\u8FDE\u63A5\u6570\uFF08\u6700\u5927\u8FDE\u63A5\u6570=\u8FDE\u63A5\u6570*\u8FDB\u7A0B\u6570\uFF09\uFF0C\u9ED8\u8BA4\u503C\u4E3A 1024</span>
    worker_connections  <span class="token number">65535</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment"># \u8BBE\u5B9A http \u670D\u52A1\u5668</span>
http <span class="token punctuation">{</span>
    <span class="token comment"># \u6587\u4EF6\u6269\u5C55\u540D\u4E0E\u6587\u4EF6\u7C7B\u578B\u6620\u5C04\u8868</span>
    <span class="token comment"># Nginx \u4F1A\u6839\u636E mime.type \u5B9A\u4E49\u7684\u5BF9\u5E94\u5173\u7CFB\u6765\u544A\u8BC9\u6D4F\u89C8\u5668\u5982\u4F55\u5904\u7406\u5F53\u524D\u8FD4\u56DE\u7684\u6587\u4EF6\uFF08\u6253\u5F00\u6216\u4E0B\u8F7D\uFF09</span>
    include       mime.types<span class="token punctuation">;</span>

    <span class="token comment"># \u5F53 Nginx \u65E0\u6CD5\u8BC6\u522B\u5F53\u524D\u8BBF\u95EE\u9875\u9762\u5185\u5BB9\u65F6\uFF08\u672A\u5B9A\u4E49\u7684\u6269\u5C55\u540D\uFF09\uFF0C\u9ED8\u8BA4\u89E6\u53D1\u4E0B\u8F7D\u52A8\u4F5C</span>
    <span class="token comment"># \u6D4F\u89C8\u5668\u8BBF\u95EE\u5230\u672A\u5B9A\u4E49\u7684\u6269\u5C55\u540D\u7684\u65F6\u5019\uFF0C\u5C31\u9ED8\u8BA4\u4E3A\u4E0B\u8F7D\u8BE5\u6587\u4EF6</span>
    <span class="token comment"># \u5982\u679C\u5C06\u8FD9\u4E2A\u8BBE\u7F6E\u6539\u6210 default_type text/html; \u5373\u628A\u6240\u6709\u672A\u8BBE\u7F6E\u7684\u6269\u5C55\u540D\u5F53 HTML \u6587\u4EF6\u6253\u5F00</span>
    default_type  application/octet-stream<span class="token punctuation">;</span>

    charset utf-8<span class="token punctuation">;</span>                         <span class="token comment"># \u9ED8\u8BA4\u7F16\u7801</span>

    <span class="token comment"># \u670D\u52A1\u5668\u540D\u5B57\u7684 hash \u8868\u5927\u5C0F\uFF08\u770B\u4E0D\u61C2\u7684\u53C2\u6570\u9ED8\u8BA4\u5373\u53EF\uFF09</span>
    server_names_hash_bucket_size <span class="token number">128</span><span class="token punctuation">;</span>
    <span class="token comment"># \u5BA2\u6237\u7AEF\u8BF7\u6C42\u5934\u90E8\u7684\u7F13\u51B2\u533A\u5927\u5C0F</span>
    client_header_buffer_size 32k<span class="token punctuation">;</span>
    <span class="token comment"># \u5BA2\u6237\u8BF7\u6C42\u5934\u7F13\u51B2\u5927\u5C0F</span>
    <span class="token comment"># Nginx \u9ED8\u8BA4\u4F1A\u7528 client_header_buffer_size \u8FD9\u4E2A buffer \u6765\u8BFB\u53D6 header \u503C</span>
    <span class="token comment"># \u5982\u679C header \u8FC7\u5927\uFF0C\u5B83\u4F1A\u4F7F\u7528 large_client_header_buffers \u6765\u8BFB\u53D6</span>
    large_client_header_buffers <span class="token number">4</span> 64k<span class="token punctuation">;</span>
    <span class="token comment"># \u8BBE\u5B9A\u901A\u8FC7 Nginx \u4E0A\u4F20\u6587\u4EF6\u7684\u5927\u5C0F</span>
    client_max_body_size 8m<span class="token punctuation">;</span>

    <span class="token comment"># \u5F00\u542F\u9AD8\u6548\u6587\u4EF6\u4F20\u8F93\u6A21\u5F0F</span>
    <span class="token comment"># sendfile \u6307\u4EE4\u6307\u5B9A Nginx \u662F\u5426\u8C03\u7528 sendfile \u51FD\u6570\u6765\u8F93\u51FA\u6587\u4EF6</span>
    <span class="token comment"># \u5BF9\u4E8E\u666E\u901A\u5E94\u7528\u8BBE\u4E3A on\uFF0C\u5982\u679C\u7528\u6765\u8FDB\u884C\u4E0B\u8F7D\u7B49\u5E94\u7528\u78C1\u76D8 IO \u91CD\u8D1F\u8F7D\u5E94\u7528\uFF0C\u53EF\u8BBE\u7F6E\u4E3A off\uFF0C\u4EE5\u5E73\u8861\u78C1\u76D8\u4E0E\u7F51\u7EDC I/O \u5904\u7406\u901F\u5EA6\uFF0C\u964D\u4F4E\u7CFB\u7EDF\u7684\u8D1F\u8F7D</span>
    <span class="token comment"># \u6CE8\u610F\uFF1A\u5982\u679C\u56FE\u7247\u663E\u793A\u4E0D\u6B63\u5E38\u628A\u8FD9\u4E2A\u6539\u6210 off</span>
    sendfile on<span class="token punctuation">;</span>
    <span class="token comment"># \u5F00\u542F\u76EE\u5F55\u5217\u8868\u8BBF\u95EE\uFF0C\u9002\u5408\u4E0B\u8F7D\u670D\u52A1\u5668\uFF0C\u9ED8\u8BA4\u5173\u95ED</span>
    autoindex on<span class="token punctuation">;</span>
    <span class="token comment"># \u9632\u6B62\u7F51\u7EDC\u963B\u585E\uFF1A\u6570\u636E\u5305\u4F1A\u5148\u7D2F\u79EF\u5230\u6700\u5927\u540E\u4E00\u6B21\u6027\u4F20\u8F93\uFF0C\u53EF\u4EE5\u6700\u5927\u5316\u5229\u7528\u7F51\u7EDC\u8D44\u6E90\uFF0C\u4F46\u4F1A\u6709\u4E00\u70B9\u70B9\u5EF6\u8FDF\uFF08\u9ED8\u8BA4\u5F00\u542F\uFF09</span>
    tcp_nopush on<span class="token punctuation">;</span>
    <span class="token comment"># \u9632\u6B62\u7F51\u7EDC\u963B\u585E\uFF1A\u5C0F\u7684\u6570\u636E\u5305\u4E0D\u7B49\u5F85\u76F4\u63A5\u4F20\u8F93\uFF08\u4E0E tcp_nopush \u4E92\u65A5\uFF0C\u4F46\u4E24\u8005\u53EF\u540C\u4E3A on \uFF0CNginx \u4F1A\u5E73\u8861\u8FD9\u4E24\u4E2A\u529F\u80FD\uFF0C\u9ED8\u8BA4\u5F00\u542F\uFF09</span>
    tcp_nodelay on<span class="token punctuation">;</span>

    keepalive_timeout <span class="token number">65</span><span class="token punctuation">;</span>                  <span class="token comment"># \u957F\u8FDE\u63A5\u8D85\u65F6\u65F6\u95F4\uFF0C\u5355\u4F4D\u662F\u79D2</span>

    <span class="token comment"># FastCGI \u76F8\u5173\u53C2\u6570\u662F\u4E3A\u4E86\u6539\u5584\u7F51\u7AD9\u7684\u6027\u80FD\uFF1A\u51CF\u5C11\u8D44\u6E90\u5360\u7528\uFF0C\u63D0\u9AD8\u8BBF\u95EE\u901F\u5EA6\u3002</span>
    <span class="token comment"># \u53C2\u80031\uFF1Ahttps://blog.csdn.net/luozhonghua2014/article/details/37737823</span>
    <span class="token comment"># \u53C2\u80032\uFF1Ahttps://blog.51cto.com/blief/1739655</span>
    fastcgi_connect_timeout <span class="token number">300</span><span class="token punctuation">;</span>        <span class="token comment"># \u8FDE\u63A5\u5230\u540E\u7AEF fastcgi \u8D85\u65F6\u65F6\u95F4\uFF08\u79D2\uFF09</span>
    fastcgi_send_timeout <span class="token number">300</span><span class="token punctuation">;</span>           <span class="token comment"># \u6307 Nginx \u8FDB\u7A0B\u5411 fastcgi \u8FDB\u7A0B\u53D1\u9001 request \u7684\u6574\u4E2A\u8FC7\u7A0B\u7684\u8D85\u65F6\u65F6\u95F4\uFF08\u79D2\uFF09</span>
    fastcgi_read_timeout <span class="token number">300</span><span class="token punctuation">;</span>           <span class="token comment"># \u6307 fastcgi \u8FDB\u7A0B\u5411 Nginx \u8FDB\u7A0B\u53D1\u9001 response \u7684\u6574\u4E2A\u8FC7\u7A0B\u7684\u8D85\u65F6\u65F6\u95F4\uFF08\u79D2\uFF09</span>
    fastcgi_buffer_size 64k<span class="token punctuation">;</span>            <span class="token comment"># \u8BFB\u53D6 fastcgi \u5E94\u7B54\u7B2C\u4E00\u90E8\u5206\u9700\u8981\u591A\u5927\u7F13\u51B2\u533A</span>
    fastcgi_buffers <span class="token number">4</span> 64k<span class="token punctuation">;</span>              <span class="token comment"># \u6307\u5B9A\u672C\u5730\u9700\u8981\u591A\u5C11\u548C\u591A\u5927\u7684\u7F13\u51B2\u533A\u6765\u7F13\u51B2 fastcgi \u5E94\u7B54\u8BF7\u6C42</span>
    fastcgi_busy_buffers_size 128k<span class="token punctuation">;</span>     <span class="token comment"># \u9ED8\u8BA4\u503C\u662F fastcgi_buffer \u7684 2 \u500D</span>
    fastcgi_temp_file_write_size 128k<span class="token punctuation">;</span>  <span class="token comment"># \u5199\u5165\u7F13\u5B58\u6587\u4EF6\u4F7F\u7528\u591A\u5927\u7684\u6570\u636E\u5757\uFF0C\u9ED8\u8BA4\u503C\u662F fastcgi_buffer \u7684 2 \u500D</span>

    <span class="token comment"># gzip \u6A21\u5757\u8BBE\u7F6E</span>
    <span class="token function">gzip</span> on<span class="token punctuation">;</span>                               <span class="token comment"># \u5F00\u542F gzip \u538B\u7F29\u8F93\u51FA</span>
    gzip_min_length 1k<span class="token punctuation">;</span>                    <span class="token comment"># \u6700\u5C0F\u538B\u7F29\u6587\u4EF6\u5927\u5C0F</span>
    gzip_buffers <span class="token number">4</span> 16k<span class="token punctuation">;</span>                    <span class="token comment"># \u538B\u7F29\u7F13\u51B2\u533A</span>
    gzip_http_version <span class="token number">1.0</span><span class="token punctuation">;</span>                 <span class="token comment"># \u538B\u7F29\u7248\u672C\uFF08\u9ED8\u8BA4 1.1\uFF0C\u524D\u7AEF\u5982\u679C\u662F squid2.5 \u8BF7\u4F7F\u7528 1.0\uFF09</span>
    gzip_comp_level <span class="token number">2</span><span class="token punctuation">;</span>                     <span class="token comment"># \u538B\u7F29\u7B49\u7EA7</span>
    <span class="token comment"># \u538B\u7F29\u7C7B\u578B\uFF0C\u9ED8\u8BA4\u5C31\u5DF2\u7ECF\u5305\u542B text/html\uFF0C\u6240\u4EE5\u4E0B\u9762\u5C31\u4E0D\u7528\u518D\u5199\u4E86\uFF0C\u5199\u4E0A\u53BB\u4E5F\u4E0D\u4F1A\u6709\u95EE\u9898\uFF0C\u4F46\u662F\u4F1A\u6709\u4E00\u4E2A warn</span>
    <span class="token comment"># \u56FE\u7247\u538B\u7F29\uFF1A\u5EFA\u8BAE\u4E0D\u5BF9 gif\u3001jpge \u7B49\u56FE\u7247\u8FDB\u884C\u538B\u7F29\uFF0C\u56E0\u4E3A\u5176\u538B\u7F29\u6BD4\u4F8B\u6781\u4F4E\uFF0C\u53CD\u800C\u8017\u8D39 CPU\uFF0C\u4F46 bmp \u53EF\u4EE5\u538B\u7F29\uFF0C\u56E0\u4E3A bmp \u538B\u7F29\u6BD4\u4F8B\u8F83\u5927</span>
    <span class="token comment"># \u5B57\u4F53\u538B\u7F29\uFF1A\u53EA\u9700\u8981\u4E3A ttf\u3001otf \u548C svg \u5B57\u4F53\u542F\u7528 gzip\uFF0C\u5BF9\u5176\u4ED6\u5B57\u4F53\u683C\u5F0F\u8FDB\u884C gzip \u538B\u7F29\u65F6\u6548\u679C\u4E0D\u660E\u663E</span>
    <span class="token comment"># \u53C2\u8003\uFF1Ahttps://blog.csdn.net/liupeifeng3514/article/details/79018334</span>
    gzip_types text/plain application/x-javascript text/css application/xml<span class="token punctuation">;</span>
    gzip_vary on<span class="token punctuation">;</span>                          <span class="token comment"># \u662F\u5426\u5728 http header \u4E2D\u6DFB\u52A0 Vary: Accept-Encoding\uFF0C\u5EFA\u8BAE\u5F00\u542F</span>
    <span class="token comment"># limit_zone crawler $binary_remote_addr 10m;    # \u5F00\u542F\u9650\u5236 IP \u8FDE\u63A5\u6570\u7684\u65F6\u5019\u9700\u8981\u4F7F\u7528</span>

    <span class="token comment"># upstream \u7684\u8D1F\u8F7D\u5747\u8861\uFF0Cweight \u662F\u6743\u91CD\uFF0C\u53EF\u4EE5\u6839\u636E\u673A\u5668\u914D\u7F6E\u5B9A\u4E49\u6743\u91CD</span>
    <span class="token comment"># weigth \u53C2\u6570\u8868\u793A\u6743\u503C\uFF0C\u6743\u503C\u8D8A\u9AD8\u88AB\u5206\u914D\u5230\u7684\u51E0\u7387\u8D8A\u5927</span>
    <span class="token comment"># Nginx \u7684 upstream \u76EE\u524D\u652F\u6301 4 \u79CD\u65B9\u5F0F\u7684\u5206\u914D\uFF0C\u8FD9\u91CC\u6F14\u793A\u4E00\u79CD\uFF0C\u540E\u9762\u7AE0\u8282\u4F1A\u5206\u522B\u6F14\u793A</span>
    upstream www.baidu.com <span class="token punctuation">{</span>
        server <span class="token number">192.168</span>.80.121:80 <span class="token assign-left variable">weight</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
        server <span class="token number">192.168</span>.80.122:80 <span class="token assign-left variable">weight</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
        server <span class="token number">192.168</span>.80.123:80 <span class="token assign-left variable">weight</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># \u5168\u5C40\u6307\u5B9A Nginx \u8BBF\u95EE\u65E5\u5FD7\u7684\u683C\u5F0F</span>
    log_format  main  <span class="token string">&#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span>
                      <span class="token string">&#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span>
                      <span class="token string">&#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;</span><span class="token punctuation">;</span>
    <span class="token comment"># \u5168\u5C40\u5B9A\u4E49 Nginx \u8BBF\u95EE\u65E5\u5FD7\u7684\u4F4D\u7F6E</span>
    access_log  logs/access.log  main<span class="token punctuation">;</span>
    <span class="token comment"># \u4E00\u822C\u4E0A\u9762\u4E24\u4E2A\u4E0D\u914D\u7F6E\uFF0C\u53EA\u8BBE\u7F6E access_log off; \u7136\u540E\u5728\u9700\u8981\u7684 server \u4E0B\u914D\u7F6E\u65E5\u5FD7</span>
    <span class="token comment"># \u8FD9\u4E48\u505A\u53EF\u4EE5\u907F\u514D\u65E5\u5FD7\u4EA7\u751F\u8FC7\u5927\uFF08\u5982\u679C http \u548C server \u90FD\u4E0D\u914D\u7F6E\uFF0C\u9ED8\u8BA4\u4F1A\u5199\u5165 logs/access.log\uFF09</span>
    access_log  off<span class="token punctuation">;</span>

    <span class="token comment"># \u865A\u62DF\u4E3B\u673A\u7684\u914D\u7F6E\uFF0C\u4E00\u4E2A server \u914D\u7F6E\u6BB5\u4E00\u822C\u5BF9\u5E94\u4E00\u4E2A\u57DF\u540D</span>
    <span class="token comment"># \u5728\u5B9E\u9645\u751F\u4EA7\u4E2D\u4E00\u822C\u4F1A\u5C06\u8FD9\u90E8\u5206\u62C6\u51FA\u6765\u5F62\u6210\u5B50\u914D\u7F6E\u6587\u4EF6\uFF0C\u540E\u9762\u7684\u7AE0\u8282\u4F1A\u8BB2</span>
    server <span class="token punctuation">{</span>
        listen       <span class="token number">80</span><span class="token punctuation">;</span>                     <span class="token comment"># \u6307\u5B9A\u76D1\u542C\u7AEF\u53E3</span>
        server_name  www.baidu.com<span class="token punctuation">;</span>          <span class="token comment"># \u6307\u5B9A\u5F53\u524D\u7F51\u7AD9\u7684\u8BBF\u95EE\u57DF\u540D</span>

        location / <span class="token punctuation">{</span>
            root   html<span class="token punctuation">;</span>                     <span class="token comment"># \u6307\u5B9A\u4EE3\u7801\u4F4D\u7F6E</span>
            index  index.html index.htm<span class="token punctuation">;</span>     <span class="token comment"># \u6307\u5B9A\u9996\u9875\u6587\u4EF6</span>
        <span class="token punctuation">}</span>

        <span class="token comment">#  \u5B9A\u4E49 404 \u9519\u8BEF\u9875\u9762\uFF0C\u5982\u679C\u662F 404 \u9519\u8BEF\uFF0C\u5219\u628A\u7AD9\u70B9\u6839\u76EE\u5F55\u4E0B\u7684 404.html \u8FD4\u56DE\u7ED9\u7528\u6237 </span>
        error_page  <span class="token number">404</span>                    /404.html<span class="token punctuation">;</span>
        <span class="token comment">#  \u5B9A\u4E49 50x \u9519\u8BEF\u9875\u9762\uFF0C\u53EF\u4EE5\u914D\u5408 location \u4F7F\u7528\uFF0C\u7528 location \u8C03\u7528\u5B9E\u9645\u7684\u9519\u8BEF\u9875\u9762</span>
        error_page      <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>    /50x.html<span class="token punctuation">;</span>
        location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span> 
            root  /usr/share/nginx/html<span class="token punctuation">;</span> 
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5168\u5C40\u65E5\u5FD7\u7684\u5173\u95ED" tabindex="-1"><a class="header-anchor" href="#\u5168\u5C40\u65E5\u5FD7\u7684\u5173\u95ED" aria-hidden="true">#</a> \u5168\u5C40\u65E5\u5FD7\u7684\u5173\u95ED</h2><p>\u4E3A\u4E86\u907F\u514D\u65E5\u5FD7\u4EA7\u751F\u8FC7\u5927\uFF0C\u4E5F\u662F\u5904\u4E8E\u6A21\u5757\u5316\u7684\u601D\u60F3\uFF0C\u6211\u4EEC\u4E00\u822C\u4E0D\u5728\u5168\u5C40\u4E2D\uFF08http \u4E2D\uFF09\u6307\u5B9A\u65E5\u5FD7\u683C\u5F0F\u548C\u8F93\u51FA\u4F4D\u7F6E\uFF0C\u800C\u662F\u5728\u5B50\u914D\u7F6E\u6587\u4EF6\u4E2D\uFF08\u6BCF\u4E2A server \u4E2D\uFF09\u5355\u72EC\u914D\u7F6E\u3002</p><p>\u4F46\u662F\u5982\u679C http \u548C server \u90FD\u4E0D\u914D\u7F6E\uFF0C\u9ED8\u8BA4\u4F1A\u5199\u5165 <code>logs/access.log</code>\uFF0C\u5373\u5168\u5C40\u7684\u5F62\u5F0F\u3002\u6240\u4EE5\u9700\u8981\u5173\u95ED\u5168\u5C40\u65E5\u5FD7\u3002</p><p>\u7F51\u4E0A\u5F88\u591A\u535A\u5BA2\u4E2D\u5C55\u793A\u7684\u90FD\u662F\u9519\u8BEF\u793A\u4F8B\uFF0C\u8FD9\u91CC\u6F14\u793A\u6B63\u786E\u7684\u5173\u95ED\u65B9\u5F0F\uFF0C\u5305\u62EC <code>error_log</code> \u548C <code>access_log </code>\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u9519\u8BEF\u793A\u4F8B\uFF0C\u4F1A\u4EA7\u751F\u540D\u5B57\u4E3A off/on \u7684\u65E5\u5FD7\u6587\u4EF6</span>
error_log off<span class="token punctuation">;</span>
access_log on<span class="token punctuation">;</span>

\u6B63\u786E\u5173\u95ED\u65B9\u5F0F
error_log /dev/null<span class="token punctuation">;</span>
access_log off<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u65E5\u5FD7-log-format-\u53EF\u9009\u9879" tabindex="-1"><a class="header-anchor" href="#\u65E5\u5FD7-log-format-\u53EF\u9009\u9879" aria-hidden="true">#</a> \u65E5\u5FD7 log_format \u53EF\u9009\u9879</h2><p>\u9ED8\u8BA4\u683C\u5F0F\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>log_format  main  <span class="token string">&#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span>
                  <span class="token string">&#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span>
                  <span class="token string">&#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53C2\u6570\u91CA\u4E49\u8868\uFF1A</p><table><thead><tr><th>\u5B57\u6BB5</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>$remote_addr</td><td>\u5BA2\u6237\u7AEF\u5730\u5740</td></tr><tr><td>$remote_user</td><td>\u5BA2\u6237\u7AEF\u7528\u6237\u540D\u79F0</td></tr><tr><td>$time_local</td><td>\u8BBF\u95EE\u65F6\u95F4\u548C\u65F6\u533A</td></tr><tr><td>$request</td><td>\u8BF7\u6C42\u7684 URI \u548C HTTP \u534F\u8BAE</td></tr><tr><td>$http_host</td><td>\u8BF7\u6C42\u5730\u5740\uFF0C\u5373\u6D4F\u89C8\u5668\u4E2D\u4F60\u8F93\u5165\u7684\u5730\u5740\uFF08IP \u6216\u57DF\u540D\uFF09</td></tr><tr><td>$status</td><td>HTTP \u8BF7\u6C42\u72B6\u6001</td></tr><tr><td>$upstream_status</td><td>upstream \u72B6\u6001</td></tr><tr><td>$body_bytes_sent</td><td>\u53D1\u9001\u7ED9\u5BA2\u6237\u7AEF\u6587\u4EF6\u5185\u5BB9\u5927\u5C0F</td></tr><tr><td>$http_referer</td><td>url \u8DF3\u8F6C\u6765\u6E90</td></tr><tr><td>$http_user_agent</td><td>\u7528\u6237\u7EC8\u7AEF\u6D4F\u89C8\u5668\u7B49\u4FE1\u606F</td></tr><tr><td>$ssl_protocol</td><td>SSL\u534F\u8BAE\u7248\u672C</td></tr><tr><td>$ssl_cipher</td><td>\u4EA4\u6362\u6570\u636E\u4E2D\u7684\u7B97\u6CD5</td></tr><tr><td>$upstream_addr</td><td>\u540E\u53F0 upstream \u7684\u5730\u5740\uFF0C\u5373\u771F\u6B63\u63D0\u4F9B\u670D\u52A1\u7684\u4E3B\u673A\u5730\u5740</td></tr><tr><td>$request_time</td><td>\u6574\u4E2A\u8BF7\u6C42\u7684\u603B\u65F6\u95F4</td></tr><tr><td>$upstream_response_time</td><td>\u8BF7\u6C42\u8FC7\u7A0B\u4E2D\uFF0Cupstream \u54CD\u5E94\u65F6\u95F4</td></tr></tbody></table><h2 id="http\u3001server\u3001location-\u4E4B\u95F4\u7684\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#http\u3001server\u3001location-\u4E4B\u95F4\u7684\u5173\u7CFB" aria-hidden="true">#</a> http\u3001server\u3001location \u4E4B\u95F4\u7684\u5173\u7CFB</h2><ul><li>http\uFF1A\u4E3B\u8981\u7528\u4E8E\u89E3\u51B3\u7528\u6237\u8BF7\u6C42\u4E2D\u7684\u62A5\u6587\u4FE1\u606F</li><li>server\uFF1A\u7528\u4E8E\u914D\u7F6E\u4E00\u4E2A\u5177\u4F53\u7684\u7F51\u7AD9\u54CD\u5E94\u64CD\u4F5C</li><li>location\uFF1A\u7528\u4E8E\u5339\u914D uri</li></ul><p>\u7531\u4E0A\u81F3\u4E0B\u662F\u5305\u542B\u5173\u7CFB\u3002</p><h2 id="\u66F4\u591A\u5176\u5B83\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#\u66F4\u591A\u5176\u5B83\u53C2\u6570" aria-hidden="true">#</a> \u66F4\u591A\u5176\u5B83\u53C2\u6570</h2><p>server \u4E2D\u7684\u53C2\u6570\u914D\u7F6E\u9879\u5176\u5B9E\u6709\u5F88\u591A\uFF0C\u5B83\u4EEC\u53EF\u4EE5\u5B9E\u73B0\u4E00\u4E9B\u4E30\u5BCC\u7684\u529F\u80FD\u3002\u4E0A\u9762\u53EA\u5217\u4E3E\u4E86\u6700\u57FA\u7840\u7684\u51E0\u4E2A\u53C2\u6570\uFF0C\u540E\u9762\u7684\u7AE0\u8282\u4F1A\u5355\u72EC\u8BB2\u89E3\u5982\u4F55\u914D\u7F6E\u6765\u5B9E\u73B0\u5404\u79CD\u529F\u80FD\u3002</p><h2 id="\u53C2\u8003\u8D44\u6599" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u8D44\u6599" aria-hidden="true">#</a> \u53C2\u8003\u8D44\u6599</h2>`,20),d={href:"https://www.nginx.com/resources/wiki/start/topics/examples/full/",title:"Full Example Configuration",target:"_blank",rel:"noopener noreferrer"},u=o("Full Example Configuration"),m=n("p",null,"\uFF08\u5B8C\uFF09",-1);function v(b,k){const s=e("ExternalLinkIcon");return t(),i("div",null,[r,n("ul",null,[n("li",null,[n("a",d,[u,l(s)])])]),m])}var h=a(p,[["render",v],["__file","config-file-params-explanation.html.vue"]]);export{h as default};
