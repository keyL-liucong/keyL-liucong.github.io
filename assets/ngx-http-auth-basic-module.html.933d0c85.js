import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{r as a,o as i,c as d,a as n,b as l,e as c,d as t}from"./app.a5bdbb25.js";var o="/assets/nginx-http-auth-basic.bd8f5860.png";const r={},p=c('<h1 id="nginx-\u9875\u9762\u5B89\u5168\u8BA4\u8BC1" tabindex="-1"><a class="header-anchor" href="#nginx-\u9875\u9762\u5B89\u5168\u8BA4\u8BC1" aria-hidden="true">#</a> Nginx \u9875\u9762\u5B89\u5168\u8BA4\u8BC1</h1><h2 id="\u6A21\u5757\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#\u6A21\u5757\u4ECB\u7ECD" aria-hidden="true">#</a> \u6A21\u5757\u4ECB\u7ECD</h2><p>\u6709\u65F6\u5019\u51FA\u4E8E\u6743\u9650\u548C\u5B89\u5168\u8003\u8651\uFF0C\u6211\u4EEC\u5E0C\u671B\u67D0\u4E9B\u9875\u9762\u4E0D\u5141\u8BB8\u968F\u4FBF\u8BBF\u95EE\uFF0C\u5FC5\u987B\u901A\u8FC7\u7528\u6237\u8BA4\u8BC1\u624D\u53EF\u4EE5\u8BBF\u95EE\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div style="text-align:center;"><img src="'+o+`" height="200" alt="Nginx Http Auth Basic"><p style="text-align:center;color:#888;">\uFF08Nginx Http Auth Basic\uFF09</p></div><p>\u8BE5\u529F\u80FD\u7528\u5230\u4E86 <code>ngx_http_auth_basic_module</code> \u8FD9\u4E2A\u6A21\u5757\uFF0C\u8BE5\u6A21\u5757\u9ED8\u8BA4\u662F\u5173\u95ED\u7684\u3002</p><p>\u8BED\u6CD5\uFF1A</p><ul><li>\u914D\u7F6E\u5F39\u6846\u63D0\u793A\uFF1A<code>auth_basic &quot;\u63D0\u793A\u8BED&quot;;</code></li><li>\u914D\u7F6E\u5BC6\u7801\u8DEF\u5F84\uFF1A<code>auth_basic_user_file \u5BC6\u7801\u6587\u4EF6\u8DEF\u5F84;</code></li></ul><p>\u53EF\u4EE5\u5C06\u5B83\u914D\u7F6E\u5728 <code>http</code>\uFF0C<code>server</code>\uFF0C<code>location</code>\uFF0C<code>limit_except</code> \u4E2D\u7684\u4EFB\u4E00\u4F4D\u7F6E\u3002</p><h2 id="htpasswd-\u521B\u5EFA\u5BC6\u7801\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#htpasswd-\u521B\u5EFA\u5BC6\u7801\u6587\u4EF6" aria-hidden="true">#</a> htpasswd \u521B\u5EFA\u5BC6\u7801\u6587\u4EF6</h2><p>\u9996\u5148\u9700\u8981\u51C6\u5907\u7528\u6237\u6587\u4EF6\uFF0C\u7528\u6237\u540D\u5BC6\u7801\u683C\u5F0F\u4E3A\uFF1A<code>\u7528\u6237\u540D:\u5BC6\u7801</code>\uFF0C\u5176\u4E2D\u5BC6\u7801\u4E0D\u662F\u660E\u6587\u3002\u6211\u4EEC\u9700\u8981\u501F\u52A9\u4E8E htpasswd \u52A0\u5BC6\u5DE5\u5177\u751F\u6210\u3002</p><p>\u67E5\u770B\u670D\u52A1\u5668\u4E2D\u662F\u5426\u5DF2\u7ECF\u5B89\u88C5\u4E86 htpasswd\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">whereis</span> htpasswd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679C\u6CA1\u6709\u5B89\u88C5\uFF0C\u9700\u8981\u5148\u8FDB\u884C\u5B89\u88C5\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Ubuntu \u7CFB\u7EDF\u4E0B\u5B89\u88C5 htpasswd</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> apache2-utils

<span class="token comment"># CentOS \u7CFB\u7EDF\u4E0B\u5B89\u88C5 htpasswd</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> -y httpd-tools
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>htpasswd \u5DE5\u5177\u7684\u8BED\u6CD5\u4E3A\uFF1A</p><ul><li>htpasswd(\u9009\u9879)(\u53C2\u6570)</li></ul><blockquote><ul><li><code>-c</code>\uFF1A\u521B\u5EFA\u4E00\u4E2A\u52A0\u5BC6\u6587\u4EF6\uFF1B</li><li><code>-n</code>\uFF1A\u4E0D\u66F4\u65B0\u52A0\u5BC6\u6587\u4EF6\uFF0C\u53EA\u5C06\u52A0\u5BC6\u540E\u7684\u7528\u6237\u540D\u5BC6\u7801\u663E\u793A\u5728\u5C4F\u5E55\u4E0A\uFF1B</li><li><code>-m</code>\uFF1A\u9ED8\u8BA4\u91C7\u7528 MD5 \u7B97\u6CD5\u5BF9\u5BC6\u7801\u8FDB\u884C\u52A0\u5BC6\uFF1B</li><li><code>-d</code>\uFF1A\u91C7\u7528 CRYPT \u7B97\u6CD5\u5BF9\u5BC6\u7801\u8FDB\u884C\u52A0\u5BC6\uFF1B</li><li><code>-p</code>\uFF1A\u4E0D\u5BF9\u5BC6\u7801\u8FDB\u884C\u8FDB\u884C\u52A0\u5BC6\uFF0C\u5373\u660E\u6587\u5BC6\u7801\uFF1B</li><li><code>-s</code>\uFF1A\u91C7\u7528 SHA \u7B97\u6CD5\u5BF9\u5BC6\u7801\u8FDB\u884C\u52A0\u5BC6\uFF1B</li><li><code>-b</code>\uFF1A\u5728\u547D\u4EE4\u884C\u4E2D\u4E00\u5E76\u8F93\u5165\u7528\u6237\u540D\u548C\u5BC6\u7801\u800C\u4E0D\u662F\u6839\u636E\u63D0\u793A\u8F93\u5165\u5BC6\u7801\uFF1B</li><li><code>-D</code>\uFF1A\u5220\u9664\u6307\u5B9A\u7684\u7528\u6237\u3002</li></ul></blockquote><p>\u901A\u8FC7 htpasswd \u5DE5\u5177\u751F\u6210\u7528\u6237\u540D\u5BC6\u7801\u6587\u4EF6\u7ED9 Nginx \u4F7F\u7528\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u8FDB\u5165 Nginx \u6587\u4EF6</span>
<span class="token builtin class-name">cd</span> /usr/local/nginx/

<span class="token comment"># \u5982\u679C\u662F\u9996\u6B21\u521B\u5EFA\uFF0C\u901A\u8FC7 -c \u9009\u9879\u53EF\u4EE5\u5728\u5F53\u524D\u76EE\u5F55\u521B\u5EFA\u4E00\u4E2A\u52A0\u5BC6\u6587\u4EF6</span>
htpasswd -bc passwd.db admin <span class="token number">123456</span>

<span class="token comment"># \u53BB\u6389 -c \u9009\u9879\uFF0C\u5373\u53EF\u5728\u7B2C\u4E00\u4E2A\u7528\u6237\u4E4B\u540E\u6DFB\u52A0\u7B2C\u4E8C\u4E2A\u7528\u6237</span>
htpasswd -b passwd.db <span class="token builtin class-name">test</span> <span class="token number">123456</span>

<span class="token comment"># \u5229\u7528 htpasswd \u547D\u4EE4\u5220\u9664\u7528\u6237\u540D\u548C\u5BC6\u7801</span>
htpasswd -D passwd.db <span class="token builtin class-name">test</span>

<span class="token comment"># \u5982\u679C\u8981\u5229\u7528 htpasswd \u547D\u4EE4\u4FEE\u6539\u5BC6\u7801</span>
<span class="token comment"># \u5148\u5220\u9664\u6307\u5B9A\u7528\u6237\uFF0C\u518D\u521B\u5EFA\u7528\u6237\u5373\u53EF\u5B9E\u73B0\u4FEE\u6539\u5BC6\u7801\u7684\u529F\u80FD</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u51FA\u4E8E\u5B89\u5168\u8003\u8651\uFF0C\u6211\u4EEC\u6700\u597D\u4FEE\u6539\u4E00\u4E0B\u7528\u6237\u6587\u4EF6 <code>passwd.db</code> \u7684\u6743\u9650\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u4FEE\u6539\u7528\u6237\u6587\u4EF6\u6743\u9650 </span>
<span class="token function">chmod</span> <span class="token number">400</span> /usr/local/nginx/passwd.db

<span class="token comment"># \u4FEE\u6539\u7528\u6237\u6587\u4EF6\u5C5E\u4E3B\u548C\u5C5E\u7EC4</span>
<span class="token function">chown</span> root:root /usr/local/nginx/passwd.db
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B64\u65F6\u7684 Nginx \u6587\u4EF6\u76EE\u5F55\u7ED3\u6784\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u251C\u2500\u2500 nginx
    \u2502\u2500\u2500 html
    \u2502\u2500\u2500 logs
    \u2502\u2500\u2500 sbin
    \u2502\u2500\u2500 <span class="token punctuation">..</span>.
    \u2502\u2500\u2500 passwd.db              <span class="token comment"># \u7528\u6237\u6587\u4EF6\uFF0C\u5B58\u50A8\u7528\u6237\u8BA4\u8BC1\u4FE1\u606F</span>
    \u2514\u2500\u2500 conf
        \u251C\u2500\u2500 <span class="token punctuation">..</span>.
        \u251C\u2500\u2500 nginx.conf         <span class="token comment"># \u4E3B\u914D\u7F6E\u6587\u4EF6</span>
        \u2514\u2500\u2500 vhosts             <span class="token comment"># \u5B50\u914D\u7F6E\u6587\u4EF6\u7684\u76EE\u5F55</span>
            \u251C\u2500\u2500 web.conf       <span class="token comment"># \u5B50\u914D\u7F6E\u6587\u4EF6 1</span>
            \u2514\u2500\u2500 api.conf       <span class="token comment"># \u5B50\u914D\u7F6E\u6587\u4EF6 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u914D\u7F6E\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u6848\u4F8B" aria-hidden="true">#</a> \u914D\u7F6E\u6848\u4F8B</h2><p>\u524D\u7AEF\u6211\u4EEC\u5DF2\u7ECF\u901A\u8FC7\u4F7F\u7528 htpasswd \u5DE5\u5177\uFF0C\u5728 <code>/usr/local/nginx/</code> \u76EE\u5F55\u4E0B\u751F\u6210\u4E86\u7528\u6237\u6587\u4EF6 <code>passwd.db</code>\uFF0C\u63A5\u4E0B\u6765\u5728 Nginx \u914D\u7F6E\u6587\u4EF6\u4E2D\u8FDB\u884C\u914D\u7F6E\u3002</p><p>\u5047\u8BBE\u6211\u4EEC\u6709\u4E2A\u7F51\u7AD9\uFF0C\u8981\u9650\u5236\u5916\u4EBA\u4E0D\u80FD\u8BBF\u95EE\u7BA1\u7406\u9875\u9762\uFF08\u53EA\u5141\u8BB8\u6307\u5B9A IP \u8BBF\u95EE <code>/admin</code> \u5F00\u59CB\u7684 uri\uFF09\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>server {
    listen 80;
    server_name  www.Hello W.cn;
    root /sites/Hello W;
    index index.html;

    location /download {
        autoindex on;
        auth_basic           &quot;\u8BF7\u8F93\u5165\u7528\u6237\u540D\u53CA\u5BC6\u7801&quot;;
        auth_basic_user_file /usr/local/nginx/passwd.db;
    }
}
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u53C2\u8003\u8D44\u6599" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u8D44\u6599" aria-hidden="true">#</a> \u53C2\u8003\u8D44\u6599</h2>`,28),u={href:"https://nginx.org/en/docs/http/ngx_http_auth_basic_module.html",title:"Module ngx_http_auth_basic_module",target:"_blank",rel:"noopener noreferrer"},v=t("Module ngx_http_auth_basic_module"),m=n("p",null,"\uFF08\u5B8C\uFF09",-1);function b(h,g){const s=a("ExternalLinkIcon");return i(),d("div",null,[p,n("ul",null,[n("li",null,[n("a",u,[v,l(s)])])]),m])}var k=e(r,[["render",b],["__file","ngx-http-auth-basic-module.html.vue"]]);export{k as default};
